<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Phone Barcode Scanner</title>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="https://unpkg.com/@zxing/library@0.19.1/umd/index.min.js"></script>
  <style>
    body { font-family: Arial; text-align: center; padding: 20px; }
    video { width: 100%; max-width: 400px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>Phone Barcode Scanner</h1>
  <video id="video" autoplay></video>
  <p id="result">Scanning...</p>

  <script>
    const socket = io();

    const codeReader = new ZXing.BrowserBarcodeReader();
    const videoElement = document.getElementById('video');
    const resultEl = document.getElementById('result');

    codeReader
      .decodeFromVideoDevice(null, videoElement, (result, err) => {
        if (result) {
          const barcode = result.text;
          resultEl.textContent = 'Scanned: ' + barcode;
          socket.emit('barcode-scanned', barcode);
        }
        if (err && !(err instanceof ZXing.NotFoundException)) {
          console.error(err);
        }
      });
  </script>
</body>
</html>
